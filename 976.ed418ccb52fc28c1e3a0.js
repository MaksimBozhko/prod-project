"use strict";(self.webpackChunkproduction_project=self.webpackChunkproduction_project||[]).push([[976],{6976:function(e,t,a){a.r(t),a.d(t,{default:function(){return De}});var r=a(1072),i=a(6974),s=a(7090),l=a(3906),n=a(4495),c=a(1752),d=a(7294),o=a(729);const m=a(7945).p.injectEndpoints({endpoints:e=>({getArticleRecommendationsList:e.query({query:e=>({url:"/articles",params:{_limit:e}})})})}).useGetArticleRecommendationsListQuery;var u=a(3379),g=a.n(u),h=a(7795),x=a.n(h),p=a(569),C=a.n(p),A=a(3565),j=a.n(A),v=a(9216),_=a.n(v),b=a(4589),P=a.n(b),D=a(126),f={};f.styleTagTransform=P(),f.setAttributes=j(),f.insert=C().bind(null,"head"),f.domAPI=x(),f.insertStyleElement=_(),g()(D.Z,f);var L=D.Z&&D.Z.locals?D.Z.locals:void 0,w=a(7277),y=a(5893);const H=(0,d.memo)((e=>{const{className:t}=e,{t:a}=(0,r.$G)("article"),{data:i,error:n,isLoading:c}=m(5);return c||n||!i?(0,y.jsx)("div",{className:(0,s.Z)("",{},[t]),children:(0,y.jsx)(o.xv,{size:o.yH.L,title:a("ошибка")})}):(0,y.jsxs)(w.k,{direction:"column",align:"normal",gap:"8",className:(0,s.Z)(L.ArticleRecommendationsList,{},[t]),children:[(0,y.jsx)(o.xv,{size:o.yH.L,title:a("Рекомендуем")}),(0,y.jsx)(l.wD,{articles:i,isLoading:c,target:"_blank",className:L.list})]})}));var Z=a(3942);const N=(0,d.lazy)((()=>a.e(880).then(a.bind(a,1880))));var R=a(8211),B=a(3875),E=a(4693),I=a(3176),S=a(2589),k=a(7769),T={};T.styleTagTransform=P(),T.setAttributes=j(),T.insert=C().bind(null,"head"),T.domAPI=x(),T.insertStyleElement=_(),g()(k.Z,T);var F=k.Z&&k.Z.locals?k.Z.locals:void 0;const O=(0,d.memo)((e=>{let{className:t,comment:a,isLoading:r}=e;return r?(0,y.jsxs)("div",{className:(0,s.Z)(F.CommentCard,{},[t,F.loading]),children:[(0,y.jsxs)("div",{className:F.header,children:[(0,y.jsx)(E.O,{width:30,height:30,border:"50%"}),(0,y.jsx)(E.O,{width:100,height:16,className:F.username})]}),(0,y.jsx)(E.O,{className:F.text,width:"100%",height:50})]}):a?(0,y.jsxs)(R.g,{gap:"8",max:!0,className:(0,s.Z)(F.CommentCard,{},[t]),children:[(0,y.jsxs)(I.F,{to:`${S.h3.profile}${a.user.id}`,className:F.header,children:[a.user?.avatar&&(0,y.jsx)(B.q,{src:a.user.avatar,size:30}),(0,y.jsx)(o.xv,{className:F.username,title:a.user.username})]}),(0,y.jsx)(o.xv,{className:F.text,text:a.text})]}):null})),z=(0,d.memo)((e=>{const{className:t,comments:a,isLoading:i,error:l}=e,{t:n}=(0,r.$G)();return l?(0,y.jsx)("div",{className:(0,s.Z)("",{},[t]),children:(0,y.jsx)(o.xv,{title:l,align:o.PH.CENTER,theme:o.d9.ERROR})}):i?(0,y.jsxs)(R.g,{gap:"8",max:!0,className:(0,s.Z)("",{},[t]),children:[(0,y.jsx)(O,{isLoading:!0}),(0,y.jsx)(O,{isLoading:!0}),(0,y.jsx)(O,{isLoading:!0})]}):(0,y.jsx)(R.g,{gap:"16",max:!0,className:(0,s.Z)("",{},[t]),children:a?.length?a.map((e=>(0,y.jsx)(O,{comment:e,isLoading:i},e.id))):n("Комментарии отсутствуют")})}));var $=a(3562),U=a(4268);const G=(0,U.hg)("articleDetails/fetchCommentsByArticleId",(async(e,t)=>{const{rejectWithValue:a,extra:r}=t;if(!e)return a("error");try{const t=await r.api.get("/comments",{params:{articleId:e,_expand:"user"}});if(!t.data)throw new Error;return t.data}catch(e){return a("error")}})),q=(0,U.HF)({selectId:e=>e.id}),V=q.getSelectors((e=>e.articleDetailsPage?.comments||q.getInitialState())),W=(0,U.oM)({name:"ArticleDetailsCommentsSlice",initialState:q.getInitialState({error:void 0,isLoading:!1,ids:[],entities:{}}),reducers:{},extraReducers:e=>{e.addCase(G.fulfilled,((e,t)=>{let{payload:a}=t;e.isLoading=!1,q.setAll(e,a)})).addCase(G.pending,(e=>{e.isLoading=!0,e.error=void 0})).addCase(G.rejected,((e,t)=>{let{payload:a}=t;e.isLoading=!1,e.error=a}))}}),{reducer:Y}=W,Q=e=>e.articleDetailsPage?.comments.isLoading,J=e=>e.articleDetailsPage?.comments.error;var M=a(1289);const K=(0,U.hg)("articleDetails/addCommentForArticle",(async(e,t)=>{const{extra:a,dispatch:r,rejectWithValue:i,getState:s}=t,n=(0,l.wq)(s()),c=(0,M.m5)(s());if(!n||!c||!e)return i("no data");try{const t=await a.api.post("/comments",{articleId:n.id,userId:c.id,text:e});if(!t.data)throw new Error;return r(G(n.id)),t.data}catch(e){return i("error")}})),X=(0,d.memo)((e=>{let{className:t,id:a}=e;const{t:i}=(0,r.$G)("article"),l=(0,Z.I0)(),n=(0,Z.v9)(V.selectAll),c=(0,Z.v9)(J),m=(0,Z.v9)(Q);(0,$.Q)((()=>{l(G(a))}));const u=(0,d.useCallback)((e=>{l(K(e))}),[l]);return(0,y.jsxs)(R.g,{gap:"8",max:!0,className:(0,s.Z)("",{},[t]),children:[(0,y.jsx)(o.xv,{title:i("Комментарии")}),(0,y.jsx)(N,{onSendComment:u}),(0,y.jsx)(z,{comments:n,isLoading:m,error:c})]})}));var ee=a(5857);const te=(0,U.hg)("articlesDetailsPage/fetchArticleRecommendations",(async(e,t)=>{const{rejectWithValue:a,extra:r}=t;try{const e=await r.api.get("/articles",{params:{_limit:4}});if(!e.data)throw new Error;return e.data}catch(e){return a("error")}})),ae=(0,U.HF)({selectId:e=>e.id}),re=(ae.getSelectors((e=>e.articleDetailsPage?.recommendations||ae.getInitialState())),(0,U.oM)({name:"ArticleDetailsPageRecommendationsSlice",initialState:ae.getInitialState({error:void 0,isLoading:!1,ids:[],entities:{}}),reducers:{},extraReducers:e=>{e.addCase(te.fulfilled,((e,t)=>{let{payload:a}=t;e.isLoading=!1,ae.setAll(e,a)})).addCase(te.pending,(e=>{e.isLoading=!0,e.error=void 0})).addCase(te.rejected,((e,t)=>{let{payload:a}=t;e.isLoading=!1,e.error=a}))}})),{reducer:ie}=re,se=(0,ee.UY)({recommendations:ie,comments:Y});var le=a(6088);const ne=(0,a(2222).P1)(l.wq,M.m5,((e,t)=>!(!e||!t)&&e.user?.id===t.id));var ce=a(8389),de={};de.styleTagTransform=P(),de.setAttributes=j(),de.insert=C().bind(null,"head"),de.domAPI=x(),de.insertStyleElement=_(),g()(ce.Z,de);var oe,me=ce.Z&&ce.Z.locals?ce.Z.locals:void 0;function ue(){return ue=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},ue.apply(this,arguments)}var ge=e=>d.createElement("svg",ue({width:14,height:10,xmlns:"http://www.w3.org/2000/svg"},e),oe||(oe=d.createElement("path",{d:"m5 9.667.94-.94-3.053-3.06h10.78V4.333H2.887l3.06-3.06L5 .333.333 5 5 9.667Z"}))),he=a(3264),xe={};xe.styleTagTransform=P(),xe.setAttributes=j(),xe.insert=C().bind(null,"head"),xe.domAPI=x(),xe.insertStyleElement=_(),g()(he.Z,xe);var pe=he.Z&&he.Z.locals?he.Z.locals:void 0,Ce=a(9711),Ae=a(4671);const je=e=>{let{separator:t="/",items:a,className:r}=e;const i=a.reduce(((e,a,r)=>(r?e.push({...a,separator:t}):e.push(a),e)),[]);return console.log("bread",a),a[a.length-1].label?(0,y.jsxs)(w.k,{gap:"8",align:"center",className:(0,s.Z)(pe.Breadcrumb,{},[r]),children:[(0,y.jsx)(Ae.J,{Svg:ge}),(0,y.jsx)(w.k,{direction:"row",gap:"4",children:i.map((e=>{let{to:t,label:a,separator:r}=e;return(0,y.jsxs)(y.Fragment,{children:[r,(0,y.jsx)(Ce.rU,{to:t,className:pe.text,children:(0,y.jsx)(o.xv,{text:a})},t)]})}))})]}):(0,y.jsx)(E.O,{width:"330px",height:"24px"})},ve=(0,d.memo)((e=>{let{className:t}=e;const{t:a}=(0,r.$G)("article"),n=(0,i.s0)(),c=(0,Z.v9)(ne),o=(0,Z.v9)(l.wq),m=(0,d.useCallback)((()=>{n(`${S.h3.article_details}${o?.id}/edit`)}),[o?.id,n]),u=(0,d.useMemo)((()=>[{to:"/articles",label:"Articles"},{to:`/articles?type=${o?.type}`,label:o?.type},{to:"",label:o?.title}]),[o]);return(0,y.jsxs)(R.U,{max:!0,justify:"between",align:"center",className:(0,s.Z)(me.ArticleDetailsPageHeader,{},[t]),children:[(0,y.jsx)(je,{items:u,className:me.btnBack}),c&&(0,y.jsx)(le.zx,{theme:le.UH.OUTLINE,onClick:m,className:me.btnEdit,children:a("Редактировать")})]})})),_e=(0,d.lazy)((()=>a.e(285).then(a.bind(a,4285)))),be=e=>(0,y.jsx)(d.Suspense,{fallback:(0,y.jsx)(E.O,{width:"100%",height:140}),children:(0,y.jsx)(_e,{...e})}),Pe={articleDetailsPage:se};var De=e=>{let{className:t}=e;const{t:a}=(0,r.$G)("article"),{id:d}=(0,i.UO)(),o=(0,i.TH)();return console.log(o.pathname),d?(0,y.jsx)(n.W,{reducers:Pe,removeAfterUnmount:!0,children:(0,y.jsx)(c.T,{className:(0,s.Z)("",{},[t]),children:(0,y.jsxs)(w.k,{direction:"column",align:"normal",gap:"16",children:[(0,y.jsx)(ve,{}),(0,y.jsx)(l.D0,{id:d}),(0,y.jsx)(be,{articleId:d}),(0,y.jsx)(H,{}),(0,y.jsx)(X,{id:d})]})})}):null}},7769:function(e,t,a){var r=a(8081),i=a.n(r),s=a(3645),l=a.n(s)()(i());l.push([e.id,".src-entities-Comment-ui-CommentCard-CommentCard-module__CommentCard--xIHBy{padding:10px;border:1px solid var(--primary-color);width:100%}.src-entities-Comment-ui-CommentCard-CommentCard-module__header--dsH_3{display:flex;align-items:center}.src-entities-Comment-ui-CommentCard-CommentCard-module__username--dw82W{margin-left:10px}.src-entities-Comment-ui-CommentCard-CommentCard-module__loading--V0iZ1{border:none}",""]),l.locals={CommentCard:"src-entities-Comment-ui-CommentCard-CommentCard-module__CommentCard--xIHBy",header:"src-entities-Comment-ui-CommentCard-CommentCard-module__header--dsH_3",username:"src-entities-Comment-ui-CommentCard-CommentCard-module__username--dw82W",loading:"src-entities-Comment-ui-CommentCard-CommentCard-module__loading--V0iZ1"},t.Z=l},126:function(e,t,a){var r=a(8081),i=a.n(r),s=a(3645),l=a.n(s)()(i());l.push([e.id,".src-features-articleRecommendationsList-ui-ArticleRecommendationsList-ArticleRecommendationsList-module__ArticleRecommendationsList--pLri2 .src-features-articleRecommendationsList-ui-ArticleRecommendationsList-ArticleRecommendationsList-module__list--zzU0e{flex-wrap:nowrap;overflow-x:auto;overflow-y:hidden}",""]),l.locals={ArticleRecommendationsList:"src-features-articleRecommendationsList-ui-ArticleRecommendationsList-ArticleRecommendationsList-module__ArticleRecommendationsList--pLri2",list:"src-features-articleRecommendationsList-ui-ArticleRecommendationsList-ArticleRecommendationsList-module__list--zzU0e"},t.Z=l},8389:function(e,t,a){var r=a(8081),i=a.n(r),s=a(3645),l=a.n(s)()(i());l.push([e.id,".src-pages-ArticleDetailsPage-ui-ArticleDetailsPageHeader-ArticleDetailsPageHeader-module__ArticleDetailsPageHeader--PF3DY .src-pages-ArticleDetailsPage-ui-ArticleDetailsPageHeader-ArticleDetailsPageHeader-module__btnBack--Jtr8T{align-self:center}.src-pages-ArticleDetailsPage-ui-ArticleDetailsPageHeader-ArticleDetailsPageHeader-module__ArticleDetailsPageHeader--PF3DY .src-pages-ArticleDetailsPage-ui-ArticleDetailsPageHeader-ArticleDetailsPageHeader-module__btnEdit--vEAGE{align-self:end}@media screen and (max-width: 1000px){.src-pages-ArticleDetailsPage-ui-ArticleDetailsPageHeader-ArticleDetailsPageHeader-module__ArticleDetailsPageHeader--PF3DY{flex-direction:column;gap:10px}}",""]),l.locals={ArticleDetailsPageHeader:"src-pages-ArticleDetailsPage-ui-ArticleDetailsPageHeader-ArticleDetailsPageHeader-module__ArticleDetailsPageHeader--PF3DY",btnBack:"src-pages-ArticleDetailsPage-ui-ArticleDetailsPageHeader-ArticleDetailsPageHeader-module__btnBack--Jtr8T",btnEdit:"src-pages-ArticleDetailsPage-ui-ArticleDetailsPageHeader-ArticleDetailsPageHeader-module__btnEdit--vEAGE"},t.Z=l},3264:function(e,t,a){var r=a(8081),i=a.n(r),s=a(3645),l=a.n(s)()(i());l.push([e.id,".src-shared-ui-Breadcrumb-ui-Breadcrumb-Breadcrumb-module__Breadcrumb--HPFFB .src-shared-ui-Breadcrumb-ui-Breadcrumb-Breadcrumb-module__text--Q3tre{white-space:nowrap}",""]),l.locals={Breadcrumb:"src-shared-ui-Breadcrumb-ui-Breadcrumb-Breadcrumb-module__Breadcrumb--HPFFB",text:"src-shared-ui-Breadcrumb-ui-Breadcrumb-Breadcrumb-module__text--Q3tre"},t.Z=l}}]);