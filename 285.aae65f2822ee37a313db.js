"use strict";(self.webpackChunkproduction_project=self.webpackChunkproduction_project||[]).push([[285],{4285:function(e,t,a){a.r(t),a.d(t,{default:function(){return P}});var r=a(1072),n=a(7294),s=a(3942),l=a(5518),i=a(1889),c=a(8211),o=a(729),d=a(7090),u=a(3379),h=a.n(u),g=a(7795),m=a.n(g),p=a(569),x=a.n(p),S=a(3565),j=a.n(S),v=a(9216),k=a.n(v),b=a(4589),R=a.n(b),f=a(2802),C={};C.styleTagTransform=R(),C.setAttributes=j(),C.insert=x().bind(null,"head"),C.domAPI=m(),C.insertStyleElement=k(),h()(f.Z,C);var _,I=f.Z&&f.Z.locals?f.Z.locals:void 0,y=a(4671);function Z(){return Z=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},Z.apply(this,arguments)}var w=e=>n.createElement("svg",Z({width:24,height:22,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),_||(_=n.createElement("path",{d:"M11.075 1.633c.32-.844 1.53-.844 1.852 0l2.07 5.734a.99.99 0 0 0 .926.633h5.087c.94 0 1.35 1.17.61 1.743L18 13a.968.968 0 0 0-.321 1.092L19 19.695c.322.9-.72 1.673-1.508 1.119l-4.917-3.12a1 1 0 0 0-1.15 0l-4.917 3.12c-.787.554-1.83-.22-1.508-1.119l1.322-5.603A.968.968 0 0 0 6 13L2.38 9.743C1.64 9.17 2.053 8 2.99 8h5.087a.989.989 0 0 0 .926-.633l2.07-5.734h0Z",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"}))),E=a(5893);const A=[1,2,3,4,5],L=(0,n.memo)((e=>{const{className:t,size:a=30,selectedStars:r=0,onSelect:s}=e,[l,i]=(0,n.useState)(r),[c,o]=(0,n.useState)(Boolean(r)),u=()=>{c||i(0)},h=e=>()=>{c||(s?.(e),i(e),o(!0))};return(0,E.jsx)("div",{className:(0,d.Z)(I.StarRating,{},[t]),children:A.map((e=>{return(0,E.jsx)(y.J,{className:(0,d.Z)(I.starIcon,{[I.selected]:c},[l>=e?I.hovered:I.normal]),Svg:w,width:a,height:a,onMouseLeave:u,onMouseEnter:(t=e,()=>{c||i(t)}),onClick:h(e)},e);var t}))})}));var O=a(4434),z=a(1174),N=a(6088),q=a(3658);const T=(0,n.memo)((e=>{const{className:t,onAccept:a,feedbackTitle:s,hasFeedback:d,onCancel:u,title:h,rate:g=0}=e,{t:m}=(0,r.$G)(),[p,x]=(0,n.useState)(!1),[S,j]=(0,n.useState)(g),[v,k]=(0,n.useState)(""),b=(0,n.useCallback)((e=>{j(e),d?x(!0):a?.(e)}),[d,a]),R=(0,n.useCallback)((()=>{x(!1),a?.(S,v)}),[v,a,S]),f=(0,n.useCallback)((()=>{x(!1),u?.(S)}),[u,S]),C=(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(o.xv,{title:s}),(0,E.jsx)(z.I,{value:v,onChange:k,placeholder:m("Ваш отзыв")})]});return(0,E.jsxs)(i.Z,{className:t,max:!0,children:[(0,E.jsxs)(c.g,{align:"center",gap:"8",max:!0,children:[(0,E.jsx)(o.xv,{title:S?m("Спасибо за оценку!"):h}),(0,E.jsx)(L,{selectedStars:S,size:40,onSelect:b})]}),(0,E.jsx)(l.I3,{children:(0,E.jsx)(O.u,{isOpen:p,lazy:!0,children:(0,E.jsxs)(c.g,{max:!0,gap:"32",children:[C,(0,E.jsxs)(c.U,{max:!0,gap:"16",justify:"end",children:[(0,E.jsx)(N.zx,{onClick:f,theme:N.UH.OUTLINE_RED,children:m("Закрыть")}),(0,E.jsx)(N.zx,{onClick:R,children:m("Отправить")})]})]})})}),(0,E.jsx)(l.$,{children:(0,E.jsx)(q.d,{isOpen:p,lazy:!0,onClose:f,children:(0,E.jsxs)(c.g,{gap:"32",children:[C,(0,E.jsx)(N.zx,{fullWidth:!0,onClick:R,size:N.qE.L,children:m("Отправить")})]})})})]})})),M=a(7945).p.injectEndpoints({endpoints:e=>({getArticleRating:e.query({query:e=>{let{articleId:t,userId:a}=e;return{url:"/article-ratings",params:{userId:a,articleId:t}}}}),rateArticle:e.mutation({query:e=>({url:"/article-ratings",method:"POST",body:e})})})}),Y=M.useGetArticleRatingQuery,F=M.useRateArticleMutation;var G=a(1289),H=a(4693),P=(0,n.memo)((e=>{const{className:t,articleId:a="1"}=e,{t:l}=(0,r.$G)(),i=(0,s.v9)(G.m5),{data:c,isLoading:o,error:d}=Y({articleId:a,userId:i?.id??""}),[u]=F(),h=(0,n.useCallback)(((e,t)=>{try{u({userId:i?.id??"",articleId:a,rate:e,feedback:t})}catch(e){console.log(e)}}),[a,u,i?.id]),g=(0,n.useCallback)(((e,t)=>{h(e,t)}),[h]),m=(0,n.useCallback)((e=>{h(e)}),[h]);if(o)return(0,E.jsx)(H.O,{width:"100%",height:120});const p=c?.[0];return(0,E.jsx)(T,{onCancel:m,onAccept:g,rate:p?.rate,className:t,title:l("Оцените статью"),feedbackTitle:l("Оставьте свой отзыв о статье, это поможет улучшить качество"),hasFeedback:!0})}))},2802:function(e,t,a){var r=a(8081),n=a.n(r),s=a(3645),l=a.n(s)()(n());l.push([e.id,".src-shared-ui-StarRating-StarRating-module__starIcon--Z1C6Y{cursor:pointer}.src-shared-ui-StarRating-StarRating-module__normal--Yv7EH{fill:none}.src-shared-ui-StarRating-StarRating-module__hovered--Qpbxq{fill:var(--primary-color)}.src-shared-ui-StarRating-StarRating-module__selected--ouStZ{cursor:auto}",""]),l.locals={starIcon:"src-shared-ui-StarRating-StarRating-module__starIcon--Z1C6Y",normal:"src-shared-ui-StarRating-StarRating-module__normal--Yv7EH",hovered:"src-shared-ui-StarRating-StarRating-module__hovered--Qpbxq",selected:"src-shared-ui-StarRating-StarRating-module__selected--ouStZ"},t.Z=l}}]);