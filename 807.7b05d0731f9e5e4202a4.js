"use strict";(self.webpackChunkproduction_project=self.webpackChunkproduction_project||[]).push([[807],{807:function(e,t,r){r.r(t),r.d(t,{default:function(){return ne}});var a=r(1072),l=r(7294),c=r(6974),i=r(7090),s=r(1752),n=r(3379),o=r.n(n),u=r(7795),d=r.n(u),p=r(569),x=r.n(p),m=r(3565),h=r.n(m),C=r(9216),A=r.n(C),k=r(4589),_=r.n(k),g=r(9876),T={};T.styleTagTransform=_(),T.setAttributes=h(),T.insert=x().bind(null,"head"),T.domAPI=d(),T.insertStyleElement=A(),o()(g.Z,T);var f=g.Z&&g.Z.locals?g.Z.locals:void 0,y=r(7277),I=r(729),j=r(1889),v=r(1174),N=r(2647),E=r(4268),b=r(3906),B=r(6357);const D=(0,E.oM)({name:"createArticle",initialState:{article:{id:"",userId:"",title:"",subtitle:"",img:"",views:0,createdAt:"",type:"",blocks:[]},isLoading:!1},reducers:{setTitle:(e,t)=>{let{payload:r}=t;e.article.title=r},setSubTitle:(e,t)=>{let{payload:r}=t;e.article.subtitle=r},setImg:(e,t)=>{let{payload:r}=t;e.article.img=r},setType:(e,t)=>{let{payload:r}=t;e.article.type=r},setNewBlock:(e,t)=>{let{payload:r}=t;const a=e.article.blocks.length.toString();switch(r){case b.Lk.CODE:e.article.blocks.push({id:a,type:r,code:""});break;case b.Lk.TEXT:e.article.blocks.push({id:a,type:r,title:"",paragraphs:[""]});break;case b.Lk.IMAGE:e.article.blocks.push({id:a,type:r,title:"",src:""})}},updateBlockTitle:(e,t)=>{let{payload:r}=t;const{id:a,title:l}=r,c=e.article.blocks.find((e=>e.id===a.toString()));c&&c.type!==b.Lk.CODE&&(c.title=l)},updateBlockContent:(e,t)=>{let{payload:r}=t;const{id:a,content:l}=r,c=e.article.blocks.find((e=>e.id===a.toString()));c&&c.type==b.Lk.TEXT?c.paragraphs=[l]:c&&c.type==b.Lk.CODE?c.code=l:c&&c.type==b.Lk.IMAGE&&(c.src=l)},setRestInfo:(e,t)=>{let{payload:r}=t;e.article.id="11",e.article.views=0,e.article.createdAt=function(){const e=new Date;return("0"+e.getDate()).slice(-2)+"."+("0"+(e.getMonth()+1)).slice(-2)+"."+e.getFullYear()}(),e.article.userId=r}},extraReducers:e=>{e.addCase(B.R.fulfilled,((e,t)=>{let{payload:r}=t;e.isLoading=!1,e.article=r})).addCase(B.R.pending,(e=>{e.error=void 0,e.isLoading=!0})).addCase(B.R.rejected,((e,t)=>{let{payload:r}=t;e.isLoading=!1,e.error=r}))}}),{actions:L}=D,{reducer:Z}=D;var R=r(3942);const w=e=>e.createArticle?.article,O=e=>e.createArticle?.article.blocks||[],S=e=>e.createArticle?.isLoading,U=e=>e.createArticle?.error;var G=r(5458);const M=[{value:b.Iq.IT,content:"айти"},{value:b.Iq.SCIENCE,content:"наука"},{value:b.Iq.ECONOMICS,content:"экономика"},{value:b.Iq.ARTIFICIAL_INTELLIGENCE,content:"искусственный интеллект"},{value:b.Iq.ART,content:"искусство"},{value:b.Iq.ENVIRONMENT,content:"окружение"}];var z=r(1940),H={};H.styleTagTransform=_(),H.setAttributes=h(),H.insert=x().bind(null,"head"),H.domAPI=d(),H.insertStyleElement=A(),o()(z.Z,H);var W=z.Z&&z.Z.locals?z.Z.locals:void 0,V=r(6088),q=r(5105),F={};F.styleTagTransform=_(),F.setAttributes=h(),F.insert=x().bind(null,"head"),F.domAPI=d(),F.insertStyleElement=A(),o()(q.Z,F);var P=q.Z&&q.Z.locals?q.Z.locals:void 0,X=r(5893);const K=(0,l.memo)((e=>{const{className:t,value:r,onChange:a,placeholder:c,autoFocus:s,readonly:n,...o}=e,u=(0,l.useRef)(null),[d,p]=(0,l.useState)(!1),x=e=>{a?.(e.target.value)};return(0,l.useEffect)((()=>{u?.current&&(u.current.style.height="0px",u.current.style.height=u.current.scrollHeight+"px")}),[x]),(0,X.jsxs)("div",{className:(0,i.Z)(P.InputWrapper,{},[t]),children:[c&&(0,X.jsx)("div",{className:P.placeholder,children:`${c}>`}),(0,X.jsx)("textarea",{ref:u,value:r||"",onChange:x,className:P.input,onFocus:()=>{p(!0)},onBlur:()=>{p(!1)},readOnly:n,...o})]})})),$=(0,l.memo)((e=>{let{className:t}=e;const{t:r}=(0,a.$G)("article"),c=(0,N.T)(),s=(0,R.v9)(O),n=(0,l.useCallback)((e=>{c(L.setNewBlock(e))}),[]),o=(0,l.useCallback)(((e,t)=>{c(L.updateBlockTitle({id:t,title:e}))}),[c]),u=(0,l.useCallback)(((e,t)=>{c(L.updateBlockContent({id:t,content:e}))}),[c]),d=(0,l.useCallback)(((e,t)=>(0,X.jsxs)(y.k,{max:!0,direction:"column",align:"start",gap:"8",children:[(0,X.jsx)(I.xv,{text:r(`Блок ${e.type}`),size:I.yH.L,theme:I.d9.INVERTED}),e.type!==b.Lk.CODE?(0,X.jsxs)(X.Fragment,{children:[(0,X.jsxs)(y.k,{max:!0,direction:"column",align:"start",gap:"8",children:[(0,X.jsx)(I.xv,{text:r("Заголовок"),size:I.yH.M,theme:I.d9.INVERTED}),(0,X.jsx)(j.Z,{className:W.inputBlock,children:(0,X.jsx)(K,{value:e.title,onChange:e=>o(e,t)})})]}),(0,X.jsxs)(y.k,{max:!0,direction:"column",align:"start",gap:"8",children:[(0,X.jsx)(I.xv,{text:e.type===b.Lk.TEXT?r("Текст"):r("Ссылка на картинку"),size:I.yH.M,theme:I.d9.INVERTED}),(0,X.jsx)(j.Z,{className:W.inputBlock,children:(0,X.jsx)(K,{value:e.type===b.Lk.TEXT?e.paragraphs.join():e.src,onChange:e=>u(e,t)})})]})]}):(0,X.jsxs)(y.k,{max:!0,direction:"column",align:"start",gap:"8",children:[(0,X.jsx)(I.xv,{text:r("Вставьте код"),size:I.yH.M,theme:I.d9.INVERTED}),(0,X.jsx)(j.Z,{className:W.inputBlock,children:(0,X.jsx)(K,{value:e.code,onChange:e=>u(e,t)})})]})]})),[]);return(0,X.jsxs)("div",{className:(0,i.Z)(W.CreateArticleBlocks,{},[t]),children:[(0,X.jsxs)(y.k,{className:W.addBtns,gap:"16",children:[(0,X.jsx)(I.xv,{text:r("Добавить секцию:"),theme:I.d9.INVERTED}),(0,X.jsx)(V.zx,{theme:V.UH.BACKGROUND_INVERTED,onClick:()=>n(b.Lk.TEXT),children:r("Текст")}),(0,X.jsx)(V.zx,{theme:V.UH.BACKGROUND_INVERTED,onClick:()=>n(b.Lk.CODE),children:r("Код")}),(0,X.jsx)(V.zx,{theme:V.UH.BACKGROUND_INVERTED,onClick:()=>n(b.Lk.IMAGE),children:r("Картинка")})]}),(0,X.jsx)(y.k,{direction:"column",gap:"32",children:s&&s.map(d)})]})}));var J=r(8211);const Q=(0,E.hg)("articlesCreatePage/fetchCreateArticle",(async(e,t)=>{const{rejectWithValue:r,extra:a,getState:l}=t,c=w(l());try{if(!(await a.api.post("/articles",c)).data)throw new Error}catch(e){return r("error")}}));var Y=r(1289);const ee=(0,E.hg)("articlesCreatePage/fetchEditArticle",(async(e,t)=>{const{rejectWithValue:r,extra:a,getState:l}=t,c=w(l());try{if(!(await a.api.put(`/articles/${c?.id}`,c)).data)throw new Error}catch(e){return r("error")}}));var te=r(4495),re=r(4693),ae=r(4434),le=r(3549);const ce={createArticle:Z},ie=(0,l.memo)((e=>{const{className:t,id:r}=e,{t:c}=(0,a.$G)(),s=(0,N.T)(),[n,o]=(0,l.useState)(!1),u=(0,R.v9)(w),d=(0,R.v9)(U),p=(0,R.v9)(S),x=(0,R.v9)(Y.m5);(0,l.useEffect)((()=>{r&&s((0,B.R)(r))}),[s,r]);const m=(0,l.useCallback)((()=>{}),[]),h=(0,l.useCallback)((e=>{s(L.setTitle(e||""))}),[s]),C=(0,l.useCallback)((e=>{s(L.setSubTitle(e||""))}),[s]),A=(0,l.useCallback)((e=>{s(L.setImg(e||""))}),[s]),k=(0,l.useCallback)((e=>{s(L.setType(e))}),[s]),_=(0,l.useCallback)((()=>{r?s(ee(r)).then(m):(s(L.setRestInfo(x?.id)),s(Q(x?.id)).then(m))}),[s]);let g;return g=p?(0,X.jsxs)(X.Fragment,{children:[(0,X.jsxs)(J.U,{gap:"32",className:f.skeletons,children:[(0,X.jsxs)(J.g,{gap:"24",max:!0,children:[(0,X.jsx)(re.O,{width:"80%",height:54}),(0,X.jsx)(re.O,{width:"80%",height:54}),(0,X.jsx)(re.O,{width:"80%",height:54}),(0,X.jsx)(re.O,{width:"80%",height:54})]}),(0,X.jsx)(re.O,{width:200,height:300})]}),(0,X.jsx)(re.O,{className:f.skeletonLine,width:350,height:65})]}):d?(0,X.jsx)(I.xv,{align:I.PH.CENTER,title:c("Произошла ошибка при загрузке")}):(0,X.jsxs)(X.Fragment,{children:[(0,X.jsxs)(J.U,{children:[(0,X.jsxs)(J.g,{gap:"16",max:!0,className:f.articleInfo,children:[(0,X.jsxs)(y.k,{max:!0,direction:"column",align:"start",gap:"8",children:[(0,X.jsx)(I.xv,{text:c("Заголовок"),size:I.yH.M,theme:I.d9.INVERTED}),(0,X.jsx)(j.Z,{className:f.cardInputInfo,children:(0,X.jsx)(v.I,{value:u?.title,onChange:h})})]}),(0,X.jsxs)(y.k,{max:!0,direction:"column",align:"start",gap:"8",children:[(0,X.jsx)(I.xv,{text:c("Подзаголовок"),size:I.yH.M,theme:I.d9.INVERTED}),(0,X.jsx)(j.Z,{className:f.cardInputInfo,children:(0,X.jsx)(v.I,{value:u?.subtitle,onChange:C})})]}),(0,X.jsxs)(y.k,{max:!0,direction:"column",align:"start",gap:"8",children:[(0,X.jsx)(I.xv,{text:c("Ссылка на картинку"),size:I.yH.M,theme:I.d9.INVERTED}),(0,X.jsx)(j.Z,{className:f.cardInputInfo,children:(0,X.jsx)(v.I,{value:u?.img,onChange:A})})]})]}),(0,X.jsxs)(J.g,{gap:"8",className:f.blockType,children:[(0,X.jsx)(I.xv,{text:c("Статья на тему"),size:I.yH.M,theme:I.d9.INVERTED}),(0,X.jsx)(G.X,{value:u?.type,onTypeChanged:k,className:f.tabs,tabs:M})]})]}),(0,X.jsx)($,{}),(0,X.jsx)(y.k,{max:!0,children:(0,X.jsx)(V.zx,{size:V.qE.L,theme:V.UH.BACKGROUND_INVERTED,className:f.btnSave,onClick:_,disabled:p,children:p?(0,X.jsx)(le.a,{}):c(r?"Сохранить":"Создать")})})]}),(0,X.jsxs)(te.W,{reducers:ce,children:[(0,X.jsx)("div",{className:(0,i.Z)(f.CreateArticle,{},[t]),children:g}),n&&(0,X.jsx)(ae.u,{isOpen:n,children:"modal content"})]})}));var se=r(7363),ne=(0,l.memo)((e=>{let{className:t}=e;const{t:r}=(0,a.$G)("article"),{id:l}=(0,c.UO)(),n=Boolean(l);return(0,X.jsxs)(s.T,{className:(0,i.Z)("",{},[t]),children:[(0,X.jsx)(I.xv,{title:r(n?"Редактирование статьи ":"Новая статья"),size:I.yH.L,className:se.Z.title}),(0,X.jsx)(ie,{id:l})]})}))},1940:function(e,t,r){var a=r(8081),l=r.n(a),c=r(3645),i=r.n(c)()(l());i.push([e.id,".src-features-createArticle-ui-CreateArticleBlocks-CreateArticleBlocks-module__CreateArticleBlocks--NBvZJ .src-features-createArticle-ui-CreateArticleBlocks-CreateArticleBlocks-module__addBtns--QRSmD{padding:20px 0}.src-features-createArticle-ui-CreateArticleBlocks-CreateArticleBlocks-module__CreateArticleBlocks--NBvZJ .src-features-createArticle-ui-CreateArticleBlocks-CreateArticleBlocks-module__inputBlock--MrbMP{width:100%}",""]),i.locals={CreateArticleBlocks:"src-features-createArticle-ui-CreateArticleBlocks-CreateArticleBlocks-module__CreateArticleBlocks--NBvZJ",addBtns:"src-features-createArticle-ui-CreateArticleBlocks-CreateArticleBlocks-module__addBtns--QRSmD",inputBlock:"src-features-createArticle-ui-CreateArticleBlocks-CreateArticleBlocks-module__inputBlock--MrbMP"},t.Z=i},9876:function(e,t,r){var a=r(8081),l=r.n(a),c=r(3645),i=r.n(c)()(l());i.push([e.id,".src-features-createArticle-ui-CreateArticle-CreateArticle-module__CreateArticle--NBLkU .src-features-createArticle-ui-CreateArticle-CreateArticle-module__articleInfo--yuGSf{width:100%}.src-features-createArticle-ui-CreateArticle-CreateArticle-module__CreateArticle--NBLkU .src-features-createArticle-ui-CreateArticle-CreateArticle-module__articleInfo--yuGSf .src-features-createArticle-ui-CreateArticle-CreateArticle-module__cardInputInfo--JykOA{width:100%}.src-features-createArticle-ui-CreateArticle-CreateArticle-module__CreateArticle--NBLkU .src-features-createArticle-ui-CreateArticle-CreateArticle-module__blockType--G3HKE{width:50%;align-items:center}.src-features-createArticle-ui-CreateArticle-CreateArticle-module__CreateArticle--NBLkU .src-features-createArticle-ui-CreateArticle-CreateArticle-module__tabs--iMl8k{flex-direction:column;white-space:normal;align-content:center;max-width:150px}.src-features-createArticle-ui-CreateArticle-CreateArticle-module__CreateArticle--NBLkU .src-features-createArticle-ui-CreateArticle-CreateArticle-module__btnSave--Wru8z{margin-left:auto;margin-top:30px}.src-features-createArticle-ui-CreateArticle-CreateArticle-module__CreateArticle--NBLkU .src-features-createArticle-ui-CreateArticle-CreateArticle-module__skeletons--ghLpN{margin-top:16px}.src-features-createArticle-ui-CreateArticle-CreateArticle-module__CreateArticle--NBLkU .src-features-createArticle-ui-CreateArticle-CreateArticle-module__skeletonLine--b2Uaq{margin-top:20px}",""]),i.locals={CreateArticle:"src-features-createArticle-ui-CreateArticle-CreateArticle-module__CreateArticle--NBLkU",articleInfo:"src-features-createArticle-ui-CreateArticle-CreateArticle-module__articleInfo--yuGSf",cardInputInfo:"src-features-createArticle-ui-CreateArticle-CreateArticle-module__cardInputInfo--JykOA",blockType:"src-features-createArticle-ui-CreateArticle-CreateArticle-module__blockType--G3HKE",tabs:"src-features-createArticle-ui-CreateArticle-CreateArticle-module__tabs--iMl8k",btnSave:"src-features-createArticle-ui-CreateArticle-CreateArticle-module__btnSave--Wru8z",skeletons:"src-features-createArticle-ui-CreateArticle-CreateArticle-module__skeletons--ghLpN",skeletonLine:"src-features-createArticle-ui-CreateArticle-CreateArticle-module__skeletonLine--b2Uaq"},t.Z=i},5144:function(e,t,r){var a=r(8081),l=r.n(a),c=r(3645),i=r.n(c)()(l());i.push([e.id,"",""]),i.locals={},t.Z=i},5105:function(e,t,r){var a=r(8081),l=r.n(a),c=r(3645),i=r.n(c)()(l());i.push([e.id,".src-shared-ui-Textarea-Textarea-module__InputWrapper--DirgC{display:flex}.src-shared-ui-Textarea-Textarea-module__InputWrapper--DirgC .src-shared-ui-Textarea-Textarea-module__placeholder--DMFsy{margin-right:5px}.src-shared-ui-Textarea-Textarea-module__InputWrapper--DirgC .src-shared-ui-Textarea-Textarea-module__input--CGDzE{resize:none;background:transparent;border:none;outline:none;width:100%;text-shadow:0 0 0 var(--primary-color);font-size:14px;line-height:17px}.src-shared-ui-Textarea-Textarea-module__InputWrapper--DirgC .src-shared-ui-Textarea-Textarea-module__input--CGDzE:focus{outline:none}.src-shared-ui-Textarea-Textarea-module__InputWrapper--DirgC .src-shared-ui-Textarea-Textarea-module__caretWrapper--tCUmN{flex-grow:1;position:relative}.src-shared-ui-Textarea-Textarea-module__InputWrapper--DirgC .src-shared-ui-Textarea-Textarea-module__caret--CCXpR{position:absolute;height:3px;width:9px;background:var(--primary-color);bottom:0;left:0;animation:src-shared-ui-Textarea-Textarea-module__blink--OmxGN .9s forwards infinite}@keyframes src-shared-ui-Textarea-Textarea-module__blink--OmxGN{0%{opacity:0}50%{opacity:.01}100%{opacity:1}}",""]),i.locals={InputWrapper:"src-shared-ui-Textarea-Textarea-module__InputWrapper--DirgC",placeholder:"src-shared-ui-Textarea-Textarea-module__placeholder--DMFsy",input:"src-shared-ui-Textarea-Textarea-module__input--CGDzE",caretWrapper:"src-shared-ui-Textarea-Textarea-module__caretWrapper--tCUmN",caret:"src-shared-ui-Textarea-Textarea-module__caret--CCXpR",blink:"src-shared-ui-Textarea-Textarea-module__blink--OmxGN"},t.Z=i},7363:function(e,t,r){var a=r(3379),l=r.n(a),c=r(7795),i=r.n(c),s=r(569),n=r.n(s),o=r(3565),u=r.n(o),d=r(9216),p=r.n(d),x=r(4589),m=r.n(x),h=r(5144),C={};C.styleTagTransform=m(),C.setAttributes=u(),C.insert=n().bind(null,"head"),C.domAPI=i(),C.insertStyleElement=p(),l()(h.Z,C),t.Z=h.Z&&h.Z.locals?h.Z.locals:void 0}}]);